[gd_scene load_steps=9 format=3 uid="uid://bqlhcyxpijyyv"]

[ext_resource type="PackedScene" uid="uid://bv8binjy2oxbh" path="res://Scenes/Weapons/Weapon.tscn" id="1_4bqml"]
[ext_resource type="Script" path="res://Scenes/Weapons/Wand/Wand.gd" id="2_ohp87"]
[ext_resource type="PackedScene" uid="uid://vkbqttxc3mbb" path="res://Components/StateMachine/StateMachine.tscn" id="3_mk3gm"]
[ext_resource type="Script" path="res://Scenes/Weapons/Wand/Reloading.gd" id="4_b81xa"]
[ext_resource type="Script" path="res://Scenes/Weapons/Wand/Idle.gd" id="4_n2wev"]
[ext_resource type="Script" path="res://Scenes/Weapons/Wand/Attack.gd" id="6_jef0n"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5prxu"]
albedo_color = Color(0.309804, 0.211765, 0.0823529, 1)

[sub_resource type="BoxMesh" id="BoxMesh_hv3qn"]
material = SubResource("StandardMaterial3D_5prxu")
size = Vector3(0.1, 0.1, 1)

[node name="Wand" node_paths=PackedStringArray("spawn_point") instance=ExtResource("1_4bqml")]
freeze = true
script = ExtResource("2_ohp87")
spawn_point = NodePath("SpawnPoint")

[node name="Node3D" type="Node3D" parent="." index="0"]

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node3D" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.5)
mesh = SubResource("BoxMesh_hv3qn")
skeleton = NodePath("../..")

[node name="SpawnPoint" type="Node3D" parent="." index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1)

[node name="StateMachine" parent="." index="2" node_paths=PackedStringArray("initial_state") instance=ExtResource("3_mk3gm")]
initial_state = NodePath("Idle")

[node name="Reloading" type="Node" parent="StateMachine" index="0"]
script = ExtResource("4_b81xa")

[node name="Timer" type="Timer" parent="StateMachine/Reloading" index="0"]
one_shot = true

[node name="Idle" type="Node" parent="StateMachine" index="1"]
script = ExtResource("4_n2wev")

[node name="Attack" type="Node" parent="StateMachine" index="2" node_paths=PackedStringArray("weapon")]
script = ExtResource("6_jef0n")
weapon = NodePath("../..")

[connection signal="Reloaded" from="StateMachine/Reloading" to="." method="_on_reloading_reloaded"]
[connection signal="timeout" from="StateMachine/Reloading/Timer" to="StateMachine/Reloading" method="_on_timer_timeout"]
